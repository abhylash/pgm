PROGRAM 8 – Aggregation Pipeline with Text Search
Step 1: Open MongoDB Shell
mongosh

Step 2: Create Database & Insert Data
use catalogDB

db.catalog.insertMany([
 { item_id:"A001", name:"Classic Leather Backpack", description:"Durable leather backpack with multiple compartments, perfect for daily commute or light travel.", tags:["leather","backpack","travel","work"], price:120, in_stock:true },
 { item_id:"A002", name:"Ergonomic Office Chair", description:"Adjustable office chair with lumbar support and breathable mesh, ideal for long working hours.", tags:["office","chair","ergonomic","comfort"], price:280, in_stock:false },
 { item_id:"A003", name:"Durable Cotton T-Shirt", description:"A soft and durable t-shirt made from 100% organic cotton. Eco-friendly and comfortable.", tags:["cotton","tshirt","organic","eco-friendly"], price:25, in_stock:true }
])


Check:

db.catalog.find()

Step 3: Create Text Index
db.catalog.createIndex({
  name:"text",
  description:"text",
  tags:"text"
})

Step 4: Aggregation Pipeline – Text Search
db.catalog.aggregate([
  {
    $match:{
      $text:{ $search:"durable backpack" }
    }
  },
  {
    $project:{
      _id:0,
      name:1,
      price:1,
      score:{ $meta:"textScore" }
    }
  }
])

Expected Output
[
 { "name":"Classic Leather Backpack", "price":120, "score":1.5 },
 { "name":"Durable Cotton T-Shirt", "price":25, "score":0.75 }
]
